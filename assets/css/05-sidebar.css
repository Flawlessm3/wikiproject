/* ==========================================================================
   05 — SIDEBAR MODULES
   Modules: SidebarNavigation, SidebarGroup, SidebarItem,
            SidebarAccordion / CollapsibleSection
   ========================================================================== */

/* ═══════════════════════════════════════════════════════════
   MODULE 5: SidebarNavigation
   PURPOSE: Left navigation panel, sticky with internal scroll.
   STATES : default / mobile-open / mobile-closed
   ═══════════════════════════════════════════════════════════ */

.sidebar {
  position: sticky;
  top: var(--nav-height);
  height: calc(100vh - var(--nav-height));
  overflow-y: auto;
  overflow-x: hidden;
  background: var(--color-bg-surface);
  border-right: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  overscroll-behavior: contain;
}

/* Scrollable inner wrapper */
.sidebar__inner {
  display: flex;
  flex-direction: column;
  gap: var(--sp-2);
  padding: var(--sp-4) 0 var(--sp-10);
  min-height: 100%;
}

/* ─── Search wrapper inside sidebar ─── */
.sidebar__search-wrap {
  padding: var(--sp-4) var(--sp-4) var(--sp-2);
  flex-shrink: 0;
}

/* ─── Navigation container ─── */
.sidebar__nav {
  display: flex;
  flex-direction: column;
  flex: 1;
  padding: 0 var(--sp-2);
}


/* ═══════════════════════════════════════════════════════════
   MODULE 6: SidebarGroup
   PURPOSE: Visual grouping with a label heading.
   ═══════════════════════════════════════════════════════════ */

.sidebar-group {
  display: flex;
  flex-direction: column;
  margin-bottom: var(--sp-1);
}

.sidebar-group__label {
  display: block;
  padding: var(--sp-3) var(--sp-3) var(--sp-2);
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
  letter-spacing: var(--tracking-widest);
  text-transform: uppercase;
  color: var(--color-text-muted);
  user-select: none;
}

.sidebar-group__list {
  display: flex;
  flex-direction: column;
  gap: 1px;
}


/* ═══════════════════════════════════════════════════════════
   MODULE 7: SidebarItem
   PURPOSE: Individual navigation link in the sidebar.
   STATES : default / hover / active / nested / disabled
   ═══════════════════════════════════════════════════════════ */

.sidebar-item {
  display: flex;
  flex-direction: column;
}

.sidebar-item__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--sp-2) var(--sp-3);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--color-text-secondary);
  border-radius: var(--r-md);
  transition: color var(--ease-base), background var(--ease-base);
  gap: var(--sp-2);
  line-height: var(--leading-snug);
  min-height: 34px;
}

/* Hover */
.sidebar-item__link:hover {
  color: var(--color-text-primary);
  background: var(--color-bg-hover);
}

/* Active / Current page */
.sidebar-item__link--active,
.sidebar-item__link[aria-current="page"] {
  color: var(--color-accent-hover);
  background: var(--color-accent-subtle);
  font-weight: var(--weight-semibold);
}
.sidebar-item__link--active:hover,
.sidebar-item__link[aria-current="page"]:hover {
  background: var(--color-accent-subtle);
  color: var(--color-accent-hover);
}

/* Nested item (inside accordion) */
.sidebar-item--nested > .sidebar-item__link {
  padding-left: calc(var(--sp-3) + var(--sp-5));
  font-size: var(--text-sm);
  color: var(--color-text-muted);
  font-weight: var(--weight-normal);
  position: relative;
}
.sidebar-item--nested > .sidebar-item__link::before {
  content: '';
  position: absolute;
  left: calc(var(--sp-3) + var(--sp-2));
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 4px;
  border-radius: var(--r-full);
  background: var(--color-border-strong);
  transition: background var(--ease-base);
}
.sidebar-item--nested > .sidebar-item__link:hover::before,
.sidebar-item--nested > .sidebar-item__link--active::before {
  background: var(--color-accent);
}

/* Disabled */
.sidebar-item__link--disabled {
  color: var(--color-text-disabled);
  cursor: not-allowed;
  pointer-events: none;
}

/* Badge inside sidebar item */
.sidebar-item__badge {
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  padding: 2px var(--sp-2);
  border-radius: var(--r-full);
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  color: var(--color-text-muted);
  flex-shrink: 0;
  line-height: 1.4;
}


/* ═══════════════════════════════════════════════════════════
   MODULE 8: SidebarAccordion / CollapsibleSection
   PURPOSE: Expandable/collapsible navigation groups.
   STATES : collapsed (aria-expanded="false") / expanded (aria-expanded="true")
   ═══════════════════════════════════════════════════════════ */

/* Accordion trigger button */
.sidebar-accordion__trigger {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: var(--sp-2) var(--sp-3);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: var(--color-text-secondary);
  border-radius: var(--r-md);
  transition: color var(--ease-base), background var(--ease-base);
  gap: var(--sp-2);
  min-height: 34px;
  text-align: left;
}
.sidebar-accordion__trigger:hover {
  color: var(--color-text-primary);
  background: var(--color-bg-hover);
}

/* Chevron icon */
.sidebar-accordion__chevron {
  flex-shrink: 0;
  color: var(--color-text-muted);
  transition: transform var(--ease-slow);
}
.sidebar-accordion__trigger[aria-expanded="true"] .sidebar-accordion__chevron {
  transform: rotate(180deg);
}

/* Collapsible list */
.sidebar-accordion__list {
  display: flex;
  flex-direction: column;
  gap: 1px;
  overflow: hidden;
  /* Height animation via JS: max-height trick */
  max-height: 0;
  opacity: 0;
  transition: max-height var(--ease-slower), opacity var(--ease-slow);
}
.sidebar-accordion__list[aria-hidden="false"],
.sidebar-accordion__list.is-open {
  max-height: 500px;
  opacity: 1;
}


/* ═══════════════════════════════════════════════════════════
   MODULE 9: Breadcrumbs
   PURPOSE: Page location indicator above article header.
   ═══════════════════════════════════════════════════════════ */

.breadcrumbs {
  margin-bottom: var(--sp-5);
}

.breadcrumbs__list {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--sp-1);
  list-style: none;
}

.breadcrumbs__item {
  display: flex;
  align-items: center;
}

.breadcrumbs__link {
  font-size: var(--text-sm);
  color: var(--color-text-muted);
  transition: color var(--ease-base);
}
.breadcrumbs__link:hover {
  color: var(--color-text-secondary);
}

.breadcrumbs__item--current {
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
}

.breadcrumbs__sep {
  color: var(--color-text-disabled);
  display: flex;
  align-items: center;
}


/* ═══════════════════════════════════════════════════════════
   MODULE 10: PaginationNav (Prev / Next article)
   PURPOSE: Bottom navigation between articles.
   ═══════════════════════════════════════════════════════════ */

.pagination-nav {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--sp-4);
  margin-top: var(--sp-10);
}

.pagination-card {
  display: flex;
  flex-direction: column;
  gap: var(--sp-1);
  padding: var(--sp-4) var(--sp-5);
  background: var(--color-bg-elevated);
  border: 1px solid var(--color-border);
  border-radius: var(--r-lg);
  transition: background var(--ease-base), border-color var(--ease-base), box-shadow var(--ease-base);
}
.pagination-card:hover {
  background: var(--color-bg-hover);
  border-color: var(--color-border-strong);
  box-shadow: var(--shadow-sm);
}

.pagination-card--prev {
  align-items: flex-start;
}
.pagination-card--next {
  align-items: flex-end;
  text-align: right;
}

.pagination-card__dir {
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  color: var(--color-text-muted);
  letter-spacing: var(--tracking-wide);
  text-transform: uppercase;
}

.pagination-card__title {
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--color-accent-hover);
  transition: color var(--ease-base);
}
.pagination-card:hover .pagination-card__title {
  color: var(--color-accent-active);
}


/* ═══════════════════════════════════════════════════════════
   Sidebar overlay (mobile backdrop)
   ═══════════════════════════════════════════════════════════ */

.sidebar-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  z-index: calc(var(--z-drawer) - 1);
  opacity: 0;
  transition: opacity var(--ease-slow);
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
}
.sidebar-overlay.is-visible {
  opacity: 1;
}
